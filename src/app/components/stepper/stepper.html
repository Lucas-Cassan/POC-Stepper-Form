<mat-stepper [linear]="true" #stepper>
  <mat-step *ngFor="let step of config.steps; let i = index" [label]="step.title">
    <ng-container *ngComponentOutlet="getComponentForStep(step.id); inputs: { dataSubmitted: onStepDataSubmitted.bind(this, step.id) }"></ng-container>
    <div class="stepper-buttons">
      <button mat-button (click)="stepper.previous()" *ngIf="stepper.selectedIndex > 0">
        Précédent
      </button>
      <button mat-raised-button color="primary" (click)="onNextClick()" *ngIf="i < config.steps.length - 1">
        Suivant
      </button>
      <button mat-raised-button color="primary" (click)="onNextClick()" *ngIf="i === config.steps.length - 1 && config.showSummary">
        Voir le résumé
      </button>
    </div>
  </mat-step>
  <mat-step *ngIf="config.showSummary" [label]="config.summaryTitle || 'Résumé'">
    <app-summary-step></app-summary-step>
    <div class="stepper-buttons">
      <button mat-button (click)="stepper.previous()">
        Précédent
      </button>
      <button mat-raised-button color="primary" (click)="onFinish()">
        Terminer
      </button>
    </div>
  </mat-step>
</mat-stepper>
